<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    
    <!-- Backend URL Configuration -->
    <script>
        // REPLACE THIS WITH YOUR ACTUAL RENDER BACKEND URL
        window.BACKEND_URL = "https://your-app-name.onrender.com";
    </script>
    
    <title>DetRan - Ransomware Detection Platform</title>
</head>
<body>
    <!-- Animated Background Particles -->
    <div class="particles" id="particles"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span class="logo-icon">üõ°Ô∏è</span>
                <span class="logo-text">DETRAN</span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html" class="nav-link active">HOME</a></li>
                <li><a href="scan.html" class="nav-link">SCAN</a></li>
                <li><a href="#features" class="nav-link">FEATURES</a></li>
                <li><a href="#about" class="nav-link">ABOUT</a></li>
                <li><a href="#contact" class="nav-link">CONTACT</a></li>
            </ul>
            <button class="mobile-toggle" id="mobileToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-bg-overlay"></div>
        <div class="hero-content">
            <div class="hero-badge">AI-POWERED SECURITY</div>
            <h1 class="hero-title">
                <span class="title-line">RANSOMWARE DETECTION</span>
                <span class="title-line">PLATFORM</span>
            </h1>
            <p class="hero-subtitle">Advanced threat detection to protect your digital assets from malicious attacks</p>
            
            <div class="hero-actions">
                <a href="scan.html" class="btn-primary">
                    <span class="btn-icon">üîç</span>
                    <span>SCAN YOUR FILES</span>
                    <span class="btn-glow"></span>
                </a>
                <button class="btn-secondary" onclick="document.getElementById('features').scrollIntoView({behavior: 'smooth'})">
                    <span>LEARN MORE</span>
                    <span class="btn-arrow">‚Üí</span>
                </button>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-number" data-target="2500">0</div>
                <div class="stat-label">Threats Detected</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-number" data-target="100">0</div>
                <div class="stat-suffix">%</div>
                <div class="stat-label">Success Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-number" data-target="24">0</div>
                <div class="stat-suffix">/7</div>
                <div class="stat-label">Support Available</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üåê</div>
                <div class="stat-number" data-target="150">0</div>
                <div class="stat-suffix">+</div>
                <div class="stat-label">Countries Protected</div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="section-header">
            <h2 class="section-title">ADVANCED FEATURES</h2>
            <p class="section-subtitle">Cutting-edge technology for comprehensive protection</p>
        </div>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <div class="feature-icon">üîí</div>
                </div>
                <h3 class="feature-title">Real-Time Protection</h3>
                <p class="feature-desc">Continuous monitoring and instant threat detection to keep your files secure around the clock</p>
                <div class="feature-border"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <div class="feature-icon">üß†</div>
                </div>
                <h3 class="feature-title">AI-Powered Analysis</h3>
                <p class="feature-desc">Machine learning algorithms detect even the most sophisticated ransomware variants</p>
                <div class="feature-border"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <div class="feature-icon">üîê</div>
                </div>
                <h3 class="feature-title">Data Privacy</h3>
                <p class="feature-desc">Your files are encrypted and processed with complete confidentiality and security</p>
                <div class="feature-border"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <div class="feature-icon">‚ö°</div>
                </div>
                <h3 class="feature-title">Lightning Fast</h3>
                <p class="feature-desc">Optimized scanning engine provides results in seconds without compromising accuracy</p>
                <div class="feature-border"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <div class="feature-icon">‚úÖ</div>
                </div>
                <h3 class="feature-title">Industry Certified</h3>
                <p class="feature-desc">Compliant with international security standards and regulations for maximum trust</p>
                <div class="feature-border"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon-wrapper">
                    <div class="feature-icon">üìä</div>
                </div>
                <h3 class="feature-title">Detailed Reports</h3>
                <p class="feature-desc">Comprehensive analysis reports with actionable insights and threat classifications</p>
                <div class="feature-border"></div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="about-container">
            <div class="about-content">
                <div class="about-badge">ABOUT US</div>
                <h2 class="about-title">WHAT IS DETRAN?</h2>
                <p class="about-text">DetRan is a next-generation ransomware detection platform that leverages artificial intelligence and machine learning to identify and neutralize threats before they can harm your system. Our advanced algorithms analyze file behavior, encryption patterns, and suspicious activities to provide comprehensive protection.</p>
                <p class="about-text">With a proven track record of detecting over 2,500 threats and maintaining a 100% success rate, DetRan stands at the forefront of cybersecurity innovation. Our platform is trusted by individuals and organizations worldwide.</p>
                <a href="scan.html" class="btn-secondary">
                    <span>START SCANNING</span>
                    <span class="btn-arrow">‚Üí</span>
                </a>
            </div>
            <div class="about-visual">
                <div class="shield-container">
                    <div class="shield-ring ring-1"></div>
                    <div class="shield-ring ring-2"></div>
                    <div class="shield-ring ring-3"></div>
                    <div class="shield-center">üõ°Ô∏è</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="contact-container">
            <h2 class="section-title">GET IN TOUCH</h2>
            <p class="section-subtitle">Have questions? We're here to help</p>
            
            <div class="contact-grid">
                <div class="contact-card">
                    <div class="contact-icon">üìß</div>
                    <h4>Email Us</h4>
                    <p>support@detran.io</p>
                </div>
                <div class="contact-card">
                    <div class="contact-icon">üí¨</div>
                    <h4>Live Chat</h4>
                    <p>Available 24/7</p>
                </div>
                <div class="contact-card">
                    <div class="contact-icon">üì±</div>
                    <h4>Call Us</h4>
                    <p>+1 (555) 123-4567</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <span class="logo-icon">üõ°Ô∏è</span>
                <span class="logo-text">DETRAN</span>
            </div>
            <p class="footer-text">¬© 2024 DetRan. All rights reserved. Protecting your digital world.</p>
        </div>
    </footer>

    <!-- Chatbot Widget -->
    <div id="detran-chatbot-container">
        <!-- Floating Icon -->
        <div id="detran-chat-icon">üí¨</div>

        <!-- Chat Window -->
        <div id="detran-chat-window">
            <div class="dw-header">
                DETRAN AI Assistant
                <span id="dw-close">‚úñ</span>
            </div>
            <div id="dw-messages"></div>
            <div class="dw-input">
                <input id="dw-text" type="text" placeholder="Type a message..." />
                <button id="dw-send">Send</button>
            </div>
        </div>
    </div>

    <!-- Main JavaScript -->
    <script>
        // Particle Animation
        function createParticles() {
            const particles = document.getElementById('particles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particles.appendChild(particle);
            }
        }

        // Mobile Menu Toggle
        const mobileToggle = document.getElementById('mobileToggle');
        const navLinks = document.querySelector('.nav-links');
        
        mobileToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            mobileToggle.classList.toggle('active');
        });

        // Smooth Scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    navLinks.classList.remove('active');
                    mobileToggle.classList.remove('active');
                }
            });
        });

        // Active Nav Link on Scroll
        window.addEventListener('scroll', () => {
            let current = '';
            const sections = document.querySelectorAll('section[id]');
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                const href = link.getAttribute('href');
                if (href === `#${current}` || (current === 'home' && href === 'index.html')) {
                    link.classList.add('active');
                }
            });
        });

        // Counter Animation
        const counters = document.querySelectorAll('.stat-number');
        let animated = false;

        const animateCounters = () => {
            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;

                const updateCounter = () => {
                    current += increment;
                    if (current < target) {
                        counter.textContent = Math.ceil(current);
                        requestAnimationFrame(updateCounter);
                    } else {
                        counter.textContent = target;
                    }
                };
                updateCounter();
            });
        };

        const statsObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !animated) {
                    animateCounters();
                    animated = true;
                }
            });
        }, { threshold: 0.5 });

        statsObserver.observe(document.querySelector('.stats'));

        // Chatbot Functionality
        const icon = document.getElementById("detran-chat-icon");
        const win = document.getElementById("detran-chat-window");
        const closeBtn = document.getElementById("dw-close");
        const sendBtn = document.getElementById("dw-send");
        const textInput = document.getElementById("dw-text");
        const msgBox = document.getElementById("dw-messages");

        // Get backend URL from configuration
        const BACKEND_URL = window.BACKEND_URL;

        // OPEN/CLOSE widget
        icon.addEventListener("click", () => {
            win.style.display = (win.style.display === "flex") ? "none" : "flex";
            if (win.style.display === "flex") {
                textInput.focus();
            }
        });
        
        closeBtn.addEventListener("click", () => {
            win.style.display = "none";
        });

        // Add messages visually
        function addMessage(txt, type) {
            const div = document.createElement("div");
            div.className = "msg " + type;
            div.innerHTML = `<div class="bubble">${txt}</div>`;
            msgBox.appendChild(div);
            msgBox.scrollTop = msgBox.scrollHeight;
        }

        async function sendMessage() {
            const message = textInput.value.trim();
            if (!message) return;

            // User bubble
            addMessage(message, "user");
            textInput.value = "";
            
            // Temporary typing bubble
            const loading = document.createElement("div");
            loading.className = "msg bot";
            loading.innerHTML = `<div class="bubble typing">Typing...</div>`;
            msgBox.appendChild(loading);
            msgBox.scrollTop = msgBox.scrollHeight;

            try {
                const response = await fetch(`${BACKEND_URL}/api/chat`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ message })
                });

                if (!response.ok) {
                    throw new Error(`Server error: ${response.status}`);
                }

                const data = await response.json();
                loading.remove(); // remove typing bubble

                if (data.reply) {
                    addMessage(data.reply, "bot");
                } else if (data.error) {
                    addMessage(`Error: ${data.error}`, "bot");
                } else {
                    addMessage("No response received from server.", "bot");
                }

            } catch (error) {
                loading.remove();
                console.error("Chatbot error:", error);
                addMessage("Error: Could not connect to DETRAN AI server. Please make sure the backend is running.", "bot");
            }
        }

        sendBtn.addEventListener("click", sendMessage);

        // Enter key support
        textInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") sendMessage();
        });

        // Add welcome message when chat opens first time
        let welcomeShown = false;
        icon.addEventListener("click", function showWelcome() {
            if (!welcomeShown && msgBox.children.length === 0) {
                addMessage("Hello! I'm DETRAN AI Assistant. I can help you with ransomware detection, cybersecurity questions, and explain how our platform works. How can I assist you today?", "bot");
                welcomeShown = true;
            }
            icon.removeEventListener("click", showWelcome);
        });

        // Initialize
        createParticles();

        // Add some basic CSS for the chatbot if not in style.css
        const style = document.createElement('style');
        style.textContent = `
            #detran-chatbot-container {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 1000;
            }
            
            #detran-chat-icon {
                width: 60px;
                height: 60px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                cursor: pointer;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                transition: all 0.3s ease;
            }
            
            #detran-chat-icon:hover {
                transform: scale(1.1);
            }
            
            #detran-chat-window {
                position: absolute;
                bottom: 70px;
                right: 0;
                width: 350px;
                height: 500px;
                background: white;
                border-radius: 15px;
                box-shadow: 0 10px 40px rgba(0,0,0,0.2);
                display: none;
                flex-direction: column;
                overflow: hidden;
            }
            
            .dw-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px;
                font-weight: bold;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            #dw-close {
                cursor: pointer;
                font-size: 18px;
            }
            
            #dw-messages {
                flex: 1;
                padding: 15px;
                overflow-y: auto;
                background: #f8f9fa;
            }
            
            .msg {
                margin-bottom: 15px;
                display: flex;
            }
            
            .msg.user {
                justify-content: flex-end;
            }
            
            .msg.bot {
                justify-content: flex-start;
            }
            
            .bubble {
                max-width: 80%;
                padding: 12px 16px;
                border-radius: 18px;
                word-wrap: break-word;
            }
            
            .msg.user .bubble {
                background: #667eea;
                color: white;
                border-bottom-right-radius: 5px;
            }
            
            .msg.bot .bubble {
                background: white;
                color: #333;
                border: 1px solid #e0e0e0;
                border-bottom-left-radius: 5px;
            }
            
            .bubble.typing {
                font-style: italic;
                color: #666;
            }
            
            .dw-input {
                padding: 15px;
                border-top: 1px solid #e0e0e0;
                display: flex;
                gap: 10px;
            }
            
            #dw-text {
                flex: 1;
                padding: 12px;
                border: 1px solid #ddd;
                border-radius: 25px;
                outline: none;
            }
            
            #dw-text:focus {
                border-color: #667eea;
            }
            
            #dw-send {
                padding: 12px 20px;
                background: #667eea;
                color: white;
                border: none;
                border-radius: 25px;
                cursor: pointer;
                transition: background 0.3s;
            }
            
            #dw-send:hover {
                background: #5a6fd8;
            }
        `;
        document.head.appendChild(style);

    </script>
</body>
</html>